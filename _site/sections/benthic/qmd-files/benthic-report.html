<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Environmental Monitoring Program - Benthic Invertebrates Report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../admin/figures-tables/sentinel.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="../../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../admin/styling_scripts/styles.css">
<link rel="stylesheet" href="../../../admin/styling_scripts/slideshow.css">
</head>

<body class="nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../admin/figures-tables/EMP-logo.png" alt="EMP logo" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../sections/general/qmd-files/index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../sections/general/qmd-files/data-links.html" rel="" target="">
 <span class="menu-text">Data Links</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-annual-reports" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Annual Reports</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-annual-reports">    
        <li>
    <a class="dropdown-item" href="../../../sections/cwq/qmd-files/cwq-report.html" rel="" target="">
 <span class="dropdown-text">Continuous Water Quality</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../sections/dwq/qmd-files/dwq-report.html" rel="" target="">
 <span class="dropdown-text">Discrete Water Quality</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../sections/benthic/qmd-files/benthic-report.html" rel="" target="">
 <span class="dropdown-text">Benthic Invertebrates</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../sections/phyto/qmd-files/phyto-report.html" rel="" target="">
 <span class="dropdown-text">Phytoplankton</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/quarto-dev/quarto-cli/discussions" rel="" target="">
 <span class="dropdown-text">Zooplankton</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-special-studies" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Special Studies</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-special-studies">    
        <li>
    <a class="dropdown-item" href="../../../sections/special-studies/qmd-files/veliger-info.html" rel="" target="">
 <span class="dropdown-text">Veliger Monitoring Program</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="mailto:ted.flynn@water.ca.gov" rel="" target="">
 <span class="menu-text">Contact Us</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#overall-results" id="toc-overall-results" class="nav-link" data-scroll-target="#overall-results">Overall Results</a></li>
  <li><a href="#regional-results" id="toc-regional-results" class="nav-link" data-scroll-target="#regional-results">Regional Results</a>
  <ul class="collapse">
  <li><a href="#central-delta-d16-d28a" id="toc-central-delta-d16-d28a" class="nav-link" data-scroll-target="#central-delta-d16-d28a">Central Delta (D16, D28A)</a></li>
  <li><a href="#confluence-d4" id="toc-confluence-d4" class="nav-link" data-scroll-target="#confluence-d4">Confluence (D4)</a></li>
  <li><a href="#north-delta-d24" id="toc-north-delta-d24" class="nav-link" data-scroll-target="#north-delta-d24">North Delta (D24)</a></li>
  <li><a href="#san-pablo-bay-d41-d41a" id="toc-san-pablo-bay-d41-d41a" class="nav-link" data-scroll-target="#san-pablo-bay-d41-d41a">San Pablo Bay (D41, D41A)</a></li>
  <li><a href="#south-delta-c9-p8" id="toc-south-delta-c9-p8" class="nav-link" data-scroll-target="#south-delta-c9-p8">South Delta (C9, P8)</a></li>
  <li><a href="#suisun-grizzly-bays-d7" id="toc-suisun-grizzly-bays-d7" class="nav-link" data-scroll-target="#suisun-grizzly-bays-d7">Suisun &amp; Grizzly Bays (D7)</a></li>
  </ul></li>
  <li><a href="#interpretations" id="toc-interpretations" class="nav-link" data-scroll-target="#interpretations">Interpretations</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#archived-reports" id="toc-archived-reports" class="nav-link" data-scroll-target="#archived-reports">Archived Reports</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Benthic Invertebrates Report</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Benthic monitoring conducted by the California Department of Water Resources (DWR) since 1975 has documented changes in the composition, density, and distribution of the macrobenthic biota inhabiting the upper San Francisco Estuary. This monitoring is performed by the Environmental Monitoring Program (EMP) as part of the Interagency Ecological Program (IEP) and is one component of the biological monitoring mandated by Water Right Decision D-1641. Since benthic species respond to changes in physical factors such as freshwater inflows, salinity, and substrate composition, benthic community data provides an indication of physical changes occurring within the Estuary. Benthic monitoring is an important component of the EMP because operation of the State Water Project can change the Estuary’s flow characteristics, affecting the density and distribution of benthic biota. Benthic monitoring data is also used to detect and document the presence of new, non-native species in the Upper Estuary, such as the 1986 arrival and subsequent wide spread of the overbite clam, Potamocorbula amurensis. This report describes the results of these monitoring efforts for water year 2023 (October 1st 2022 through September 30th 2023) which was classified as a wet year in the Sacramento and San Joaquin Valleys <a href="https://cdec.water.ca.gov/reportapp/javareports?name=WSIHIST">(source)</a>.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>Benthic monitoring was conducted monthly at 10 sampling sites distributed throughout the Estuary, from San Pablo Bay upstream through the Sacramento-San Joaquin Delta (<a href="#fig-stations">Figure&nbsp;1</a>; <a href="#tbl-stations">Table&nbsp;1</a>). EMP staff collected four bottom grab samples at each station using a Ponar dredge with a sampling area of 0.052 <span class="math inline">\(m^2\)</span>. The four replicate grab samples were analyzed for benthic macrofauna by Hydrozoology, a private laboratory under contract with DWR. All organisms were identified to the lowest taxon possible and enumerated.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-stations" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_station_map.jpg" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Map of EMP’s benthic field sites.</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-stations" class="anchored">
<table class="table table-striped table-sm small" data-quarto-postprocess="true">
<caption>Table&nbsp;1: Stations included within each region of the Delta</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Region</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">WY Index</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Stations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">Carquinez</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">NZ002, NZ004</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">Central Delta</td>
<td style="text-align: center; width: 33.3333333333333%;">San Joaquin</td>
<td style="text-align: center; width: 33.3333333333333%;">D16, D19, D26, D28A</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">Confluence</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">D4, D10, D12, D22</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">North Delta</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">C3A, NZ068</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">San Pablo Bay</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">D41, D41A, NZ325</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">South Delta</td>
<td style="text-align: center; width: 33.3333333333333%;">San Joaquin</td>
<td style="text-align: center; width: 33.3333333333333%;">C9, C10A, MD10A, P8</td>
</tr>
<tr class="odd">
<td style="text-align: center; width: 33.3333333333333%;">Suisun &amp; Grizzly Bays</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">D6, D7, D8</td>
</tr>
<tr class="even">
<td style="text-align: center; width: 33.3333333333333%;">Suisun Marsh</td>
<td style="text-align: center; width: 33.3333333333333%;">Sacramento</td>
<td style="text-align: center; width: 33.3333333333333%;">NZ032, NZS42</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>The 10 most common genera were determined by summing the normalized organism counts across all stations and months for each genus. For the bar graphs, average organism counts were calculated per month, per region, and normalized to the number of stations. Average summary statistics are reported as the mean (μ) ± the standard deviation.</p>
<p>For more in-depth methodology, see <a href="https://portal.edirepository.org/nis/metadataviewer?packageid=edi.1320.6">here</a>.</p>
</section>
<section id="overall-results" class="level2">
<h2 class="anchored" data-anchor-id="overall-results">Overall Results</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-abund" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/species_list.png" class="img-fluid figure-img" width="332"></p>
<figcaption class="figure-caption">Figure&nbsp;2: List of ten most numerous benthic invertebrate species found at EMP sites.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="regional-results" class="level2">
<h2 class="anchored" data-anchor-id="regional-results">Regional Results</h2>
<section id="central-delta-d16-d28a" class="level3">
<h3 class="anchored" data-anchor-id="central-delta-d16-d28a">Central Delta (D16, D28A)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_d16" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_d16.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Density of benthic organisms, by month, collected at station D16.</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_d28a" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_d28a.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Density of benthic organisms, by month, collected at station D28A.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="confluence-d4" class="level3">
<h3 class="anchored" data-anchor-id="confluence-d4">Confluence (D4)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_d4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_d4.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;5: Density of benthic organisms, by month, collected at station D4.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="north-delta-d24" class="level3">
<h3 class="anchored" data-anchor-id="north-delta-d24">North Delta (D24)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_d24" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_d24.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Density of benthic organisms, by month, collected at station D24.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="san-pablo-bay-d41-d41a" class="level3">
<h3 class="anchored" data-anchor-id="san-pablo-bay-d41-d41a">San Pablo Bay (D41, D41A)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_d41" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_d41.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Density of benthic organisms, by month, collected at station D41.</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_d41a" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_d41a.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Density of benthic organisms, by month, collected at station D41A.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="south-delta-c9-p8" class="level3">
<h3 class="anchored" data-anchor-id="south-delta-c9-p8">South Delta (C9, P8)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_c9" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_c9.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;9: Density of benthic organisms, by month, collected at station C9.</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_p8" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_p8.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;10: Density of benthic organisms, by month, collected at station P8.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="suisun-grizzly-bays-d7" class="level3">
<h3 class="anchored" data-anchor-id="suisun-grizzly-bays-d7">Suisun &amp; Grizzly Bays (D7)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-benthic_d7" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="../figures/benthic_bar_d7.jpg" class="img-fluid figure-img" width="1476"></p>
<figcaption class="figure-caption">Figure&nbsp;11: Density of benthic organisms, by month, collected at station D7.</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="interpretations" class="level2">
<h2 class="anchored" data-anchor-id="interpretations">Interpretations</h2>
<p><span class="smallcaps"><u><strong>To be written by section lead</strong></u></span></p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p>Fields W, Messer C. 1999. Life on the bottom: Trends in species composition of the IEP-DWR Benthic Monitoring Program. IEP Newsletter 12(4): 38-41.</p>
<p>Carlton, J. T. 2007. The Light and Smith manual: Intertidal Invertebrates from central California to Oregon, 4th edition. Berkeley, CA, University of California Press.</p>
<p>Feyrer, F., B. Herbold, S. A. Matern and P. B. Moyle. 2003. Dietary shifts in a stressed fish assemblage: consequences of a bivalve invasion in the San Francisco Estuary. Environmental Biology of Fishes 67(3): 277-288.</p>
</section>
<section id="archived-reports" class="level2">
<h2 class="anchored" data-anchor-id="archived-reports">Archived Reports</h2>
<p>Previous EMP phytoplankton reports can be found <a href="https://github.com/emp-dwr/emp-website/tree/gh-pages/admin/archive/benthic">here</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>

</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><img src="../../..\admin/figures-tables/EMP_footer.png" alt="DWR, USBR, CDFW, and IEP logos" height="50"></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>